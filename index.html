<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Linktree Personalizado</title>
    <style>
        :root {
            --primary-color: #6366f1;
            --secondary-color: #4f46e5;
            --background-color: #f8fafc;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #e2e8f0;
            --background-image: none;
            --background-blur: 0px;
            --background-brightness: 100%;
            --container-background-image: none;
            --container-background-blur: 0px;
            --container-background-brightness: 100%;
        }

        .dark-theme {
            --primary-color: #818cf8;
            --secondary-color: #6366f1;
            --background-color: #0f172a;
            --text-color: #f1f5f9;
            --card-bg: #1e293b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --container-bg: #1e293b;
            --container-border: 1px solid #334155;
        }

        .pink-theme {
            --primary-color: #ec4899;
            --secondary-color: #db2777;
            --background-color: #fdf2f8;
            --text-color: #831843;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(236, 72, 153, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #fbcfe8;
        }

        .green-theme {
            --primary-color: #10b981;
            --secondary-color: #059669;
            --background-color: #f0fdf4;
            --text-color: #064e3b;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #bbf7d0;
        }

        .purple-theme {
            --primary-color: #8b5cf6;
            --secondary-color: #7c3aed;
            --background-color: #faf5ff;
            --text-color: #581c87;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(139, 92, 246, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #ddd6fe;
        }

        .orange-theme {
            --primary-color: #f59e0b;
            --secondary-color: #d97706;
            --background-color: #fffbeb;
            --text-color: #92400e;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #fed7aa;
        }

        .navy-theme {
            --primary-color: #3b82f6;
            --secondary-color: #2563eb;
            --background-color: #eff6ff;
            --text-color: #1e3a8a;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
            --container-bg: #ffffff;
            --container-border: 1px solid #bfdbfe;
        }

        .gradient-theme {
            --primary-color: #8b5cf6;
            --secondary-color: #ec4899;
            --background-color: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --text-color: #ffffff;
            --card-bg: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --container-bg: rgba(255, 255, 255, 0.15);
            --container-border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .gradient-theme .container {
            backdrop-filter: blur(10px);
        }

        .gradient-theme .link-card,
        .gradient-theme .product-card {
            backdrop-filter: blur(5px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .background-element {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .background-video {
            filter: brightness(var(--background-brightness)) blur(var(--background-blur));
        }

        .background-image {
            filter: brightness(var(--background-brightness)) blur(var(--background-blur));
        }

        .youtube-background iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .youtube-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            color: white;
            flex-direction: column;
            text-align: center;
            padding: 20px;
            width: 100%;
            height: 100%;
        }

        .youtube-placeholder button {
            background: #ff0000;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }

        .youtube-placeholder button:hover {
            background: #cc0000;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        body.has-background::before {
            opacity: 1;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background-color: var(--container-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: var(--container-border);
            transition: all 0.3s;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        .container-background-element {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .container-background-video {
            filter: brightness(var(--container-background-brightness)) blur(var(--container-background-blur));
        }

        .container-background-image {
            filter: brightness(var(--container-background-brightness)) blur(var(--container-background-blur));
        }

        .container-youtube-background iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.15);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(2px);
        }

        .container.has-background::before {
            opacity: 1;
        }

        .container-content {
            position: relative;
            z-index: 2;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px;
            border: 4px solid var(--primary-color);
            display: block;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .bio {
            margin-bottom: 25px;
            color: #64748b;
        }

        .links-container {
            margin-bottom: 30px;
        }

        .link-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .link-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .link-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .link-text {
            flex: 1;
        }

        .link-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .link-url {
            display: none;
        }

        .section-title {
            margin: 30px 0 15px;
            font-size: 1.3rem;
            text-align: center;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .product-info {
            padding: 10px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .product-price {
            color: var(--primary-color);
            font-weight: bold;
        }

        .edit-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 100;
            font-size: 1.5rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-danger {
            background-color: #ef4444;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option.active {
            border-color: #333;
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }

        .tab.active {
            border-bottom-color: var(--primary-color);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .product-actions button {
            flex: 1;
            padding: 8px;
            font-size: 0.8rem;
        }

        .theme-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .theme-option:hover {
            background-color: #f5f5f5;
        }

        .theme-option.active {
            border-color: var(--primary-color);
            background-color: rgba(99, 102, 241, 0.1);
        }

        .theme-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            font-weight: bold;
        }

        .theme-info {
            flex: 1;
        }

        .theme-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .theme-description {
            font-size: 0.8rem;
            color: #666;
        }

        .background-controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .background-preview {
            width: 100%;
            height: 100px;
            border-radius: 8px;
            margin: 10px 0;
            background-size: cover;
            background-position: center;
            border: 2px dashed #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            overflow: hidden;
        }

        .background-preview video,
        .background-preview iframe {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
        }

        .preset-backgrounds {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .preset-bg {
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            border: 2px solid transparent;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .preset-bg video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preset-bg:hover {
            transform: scale(1.05);
        }

        .preset-bg.active {
            border-color: var(--primary-color);
        }

        .media-type-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
        }

        .remove-bg {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .tab-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .tab-section:last-child {
            border-bottom: none;
        }

        .tab-section h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .media-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .media-type-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .media-type-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .url-examples {
            margin-top: 5px;
            padding: 8px;
            background: #f1f5f9;
            border-radius: 6px;
            font-size: 0.8rem;
        }

        .url-examples small {
            color: #64748b;
        }

        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .auth-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .auth-content h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .auth-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .auth-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: background-color 0.2s;
        }

        .auth-btn:hover {
            background-color: var(--secondary-color);
        }

        .auth-error {
            color: #ef4444;
            margin-top: 10px;
            display: none;
        }

        .admin-access-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 99;
            font-size: 1rem;
            opacity: 0.3;
            transition: opacity 0.3s;
        }

        .admin-access-btn:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="youtubeBackground" class="background-element youtube-background" style="display: none;"></div>
    <video id="backgroundVideo" class="background-element background-video" autoplay muted loop style="display: none;"></video>
    <img id="backgroundImage" class="background-element background-image" style="display: none;">
    
    <div class="admin-access-btn" id="adminAccessBtn">🔐</div>
    
    <div class="container" id="mainContainer">
        <div id="containerYoutubeBackground" class="container-background-element container-youtube-background" style="display: none;"></div>
        <video id="containerBackgroundVideo" class="container-background-element container-background-video" autoplay muted loop style="display: none;"></video>
        <img id="containerBackgroundImage" class="container-background-element container-background-image" style="display: none;">
        
        <div class="container-content">
            <header>
                <img id="profileImage" src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Foto de perfil" class="profile-pic">
                <h1 id="profileName">Maria Silva</h1>
                <p id="profileBio" class="bio">Criadora de conteúdo | Empreendedora | Compartilhando meu dia a dia e produtos que amo</p>
            </header>

            <div class="links-container" id="linksContainer">
                <!-- Links serão adicionados dinamicamente -->
            </div>

            <h2 class="section-title">Minha Loja</h2>
            <div class="product-grid" id="productGrid">
                <!-- Produtos serão adicionados dinamicamente -->
            </div>
        </div>
    </div>

    <div class="edit-btn" id="editBtn">✏️</div>

    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <h2>Acesso Administrativo</h2>
            <input type="password" class="auth-input" id="adminPassword" placeholder="Digite a senha de administrador">
            <button class="auth-btn" id="submitPassword">Acessar</button>
            <div class="auth-error" id="authError">Senha incorreta. Tente novamente.</div>
        </div>
    </div>

    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Perfil</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>

            <div class="tab-container">
                <div class="tab active" data-tab="profile">Perfil</div>
                <div class="tab" data-tab="links">Links</div>
                <div class="tab" data-tab="products">Produtos</div>
                <div class="tab" data-tab="appearance">Cores</div>
                <div class="tab" data-tab="theme">Temas</div>
                <div class="tab" data-tab="background">Fundo</div>
            </div>

            <div class="tab-content active" id="profileTab">
                <div class="form-group">
                    <label for="editProfileImage">URL da Foto de Perfil</label>
                    <input type="text" id="editProfileImage" placeholder="https://exemplo.com/foto.jpg">
                </div>
                <div class="form-group">
                    <label for="editProfileName">Nome</label>
                    <input type="text" id="editProfileName" placeholder="Seu Nome">
                </div>
                <div class="form-group">
                    <label for="editProfileBio">Bio</label>
                    <textarea id="editProfileBio" placeholder="Sua bio aqui"></textarea>
                </div>
                <button class="btn" id="saveProfile">Salvar Perfil</button>
            </div>

            <div class="tab-content" id="linksTab">
                <div id="linksList"></div>
                <button class="btn" id="addLinkBtn" style="margin-top: 15px;">+ Adicionar Link</button>
            </div>

            <div class="tab-content" id="productsTab">
                <div id="productsList"></div>
                <button class="btn" id="addProductBtn" style="margin-top: 15px;">+ Adicionar Produto</button>
            </div>

            <div class="tab-content" id="appearanceTab">
                <div class="form-group">
                    <label>Cor Principal</label>
                    <div>
                        <div class="color-option active" style="background-color: #6366f1;" data-color="#6366f1"></div>
                        <div class="color-option" style="background-color: #10b981;" data-color="#10b981"></div>
                        <div class="color-option" style="background-color: #f59e0b;" data-color="#f59e0b"></div>
                        <div class="color-option" style="background-color: #ef4444;" data-color="#ef4444"></div>
                        <div class="color-option" style="background-color: #8b5cf6;" data-color="#8b5cf6"></div>
                        <div class="color-option" style="background-color: #ec4899;" data-color="#ec4899"></div>
                        <div class="color-option" style="background-color: #3b82f6;" data-color="#3b82f6"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="customColor">Ou digite uma cor personalizada:</label>
                    <input type="color" id="customColor" value="#6366f1">
                </div>
                <button class="btn" id="saveAppearance">Salvar Cores</button>
            </div>

            <div class="tab-content" id="themeTab">
                <div class="form-group">
                    <label>Selecione um Tema</label>
                    <div id="themeOptions">
                        <div class="theme-option active" data-theme="default">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #6366f1, #4f46e5);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Padrão</div>
                                <div class="theme-description">Tema claro com cores azuis</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="dark">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #1e293b, #0f172a);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Escuro</div>
                                <div class="theme-description">Tema escuro com contraste elevado</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="pink">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #ec4899, #db2777);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Rosa</div>
                                <div class="theme-description">Tema claro com tons rosados</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="green">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #10b981, #059669);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Verde</div>
                                <div class="theme-description">Tema natural com tons verdes</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="purple">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Roxo</div>
                                <div class="theme-description">Tema elegante com tons roxos</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="orange">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #f59e0b, #d97706);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Laranja</div>
                                <div class="theme-description">Tema energético com tons laranjas</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="navy">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Azul Marinho</div>
                                <div class="theme-description">Tema profissional com azuis profundos</div>
                            </div>
                        </div>
                        <div class="theme-option" data-theme="gradient">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);">A</div>
                            <div class="theme-info">
                                <div class="theme-name">Gradiente</div>
                                <div class="theme-description">Tema moderno com efeito glassmorphism</div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn" id="saveTheme">Salvar Tema</button>
            </div>

            <div class="tab-content" id="backgroundTab">
                <div class="tab-section">
                    <h3>Fundo da Página</h3>
                    <div class="background-controls">
                        <div class="media-type-selector">
                            <button class="media-type-btn active" data-type="image">Imagem</button>
                            <button class="media-type-btn" data-type="video">Vídeo MP4</button>
                            <button class="media-type-btn" data-type="youtube">YouTube</button>
                        </div>
                        
                        <div class="form-group">
                            <label for="backgroundUrl">URL do Fundo</label>
                            <input type="text" id="backgroundUrl" placeholder="Cole o link aqui...">
                            <div class="url-examples">
                                <small>
                                    <strong>Dica para YouTube:</strong> Use o botão "Visualizar" para ativar o vídeo.<br>
                                    <strong>Links que funcionam:</strong><br>
                                    • YouTube: https://youtube.com/watch?v=CODIGO<br>
                                    • MP4: https://assets.mixkit.co/videos/preview/mixkit-tree-with-yellow-flowers-1173-large.mp4<br>
                                    • Imagem: https://exemplo.com/foto.jpg
                                </small>
                            </div>
                            <button class="btn" id="previewBackground" style="margin-top: 10px; width: 100%;">Visualizar Fundo</button>
                        </div>

                        <div class="form-group">
                            <label>Pré-visualização do Fundo:</label>
                            <div class="background-preview" id="backgroundPreview">
                                Nenhum fundo selecionado
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Ajustes do Fundo:</label>
                            
                            <div class="slider-container">
                                <span>Brilho:</span>
                                <input type="range" id="backgroundBrightness" min="0" max="200" value="100" class="slider">
                                <span class="slider-value" id="brightnessValue">100%</span>
                            </div>

                            <div class="slider-container">
                                <span>Desfoque:</span>
                                <input type="range" id="backgroundBlur" min="0" max="20" value="0" class="slider">
                                <span class="slider-value" id="blurValue">0px</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Fundos Pré-definidos (Recomendados):</label>
                            <div class="preset-backgrounds">
                                <div class="preset-bg" data-url="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" data-type="image" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80');">
                                    <span class="media-type-badge">IMG</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-tree-with-yellow-flowers-1173-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-tree-with-yellow-flowers-1173-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-white-flowers-in-the-wind-1174-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-white-flowers-in-the-wind-1174-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-abstract-background-1177-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-abstract-background-1177-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                                <div class="preset-bg" data-url="https://images.unsplash.com/photo-1518837695005-2083093ee35b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" data-type="image" style="background-image: url('https://images.unsplash.com/photo-1518837695005-2083093ee35b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80');">
                                    <span class="media-type-badge">IMG</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-geometric-pattern-1176-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-geometric-pattern-1176-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                            </div>
                        </div>

                        <button class="remove-bg" id="removeBackground">Remover Fundo da Página</button>
                        <button class="btn" id="saveBackground" style="margin-top: 15px; width: 100%;">Salvar Fundo da Página</button>
                    </div>
                </div>

                <div class="tab-section">
                    <h3>Fundo do Retângulo</h3>
                    <div class="background-controls">
                        <div class="media-type-selector">
                            <button class="media-type-btn active" data-type="image">Imagem</button>
                            <button class="media-type-btn" data-type="video">Vídeo MP4</button>
                            <button class="media-type-btn" data-type="youtube">YouTube</button>
                        </div>
                        
                        <div class="form-group">
                            <label for="containerBackgroundUrl">URL do Fundo do Retângulo</label>
                            <input type="text" id="containerBackgroundUrl" placeholder="Cole o link aqui...">
                            <button class="btn" id="previewContainerBackground" style="margin-top: 10px; width: 100%;">Visualizar Fundo do Retângulo</button>
                        </div>

                        <div class="form-group">
                            <label>Pré-visualização do Retângulo:</label>
                            <div class="background-preview" id="containerBackgroundPreview">
                                Nenhum fundo selecionado
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Ajustes do Retângulo:</label>
                            
                            <div class="slider-container">
                                <span>Brilho:</span>
                                <input type="range" id="containerBackgroundBrightness" min="0" max="200" value="100" class="slider">
                                <span class="slider-value" id="containerBrightnessValue">100%</span>
                            </div>

                            <div class="slider-container">
                                <span>Desfoque:</span>
                                <input type="range" id="containerBackgroundBlur" min="0" max="20" value="0" class="slider">
                                <span class="slider-value" id="containerBlurValue">0px</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Fundos Pré-definidos para Retângulo:</label>
                            <div class="preset-backgrounds">
                                <div class="preset-bg" data-url="https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" data-type="image" style="background-image: url('https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80');">
                                    <span class="media-type-badge">IMG</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-abstract-background-1177-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-abstract-background-1177-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                                <div class="preset-bg" data-url="https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" data-type="image" style="background-image: url('https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80');">
                                    <span class="media-type-badge">IMG</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-geometric-pattern-1176-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-geometric-pattern-1176-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                                <div class="preset-bg" data-url="https://images.unsplash.com/photo-1552083375-1447ce886485?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" data-type="image" style="background-image: url('https://images.unsplash.com/photo-1552083375-1447ce886485?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80');">
                                    <span class="media-type-badge">IMG</span>
                                </div>
                                <div class="preset-bg" data-url="https://assets.mixkit.co/videos/preview/mixkit-moving-stars-1175-large.mp4" data-type="video">
                                    <video muted loop>
                                        <source src="https://assets.mixkit.co/videos/preview/mixkit-moving-stars-1175-large.mp4" type="video/mp4">
                                    </video>
                                    <span class="media-type-badge">MP4</span>
                                </div>
                            </div>
                        </div>

                        <button class="remove-bg" id="removeContainerBackground">Remover Fundo do Retângulo</button>
                        <button class="btn" id="saveContainerBackground" style="margin-top: 15px; width: 100%;">Salvar Fundo do Retângulo</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // SISTEMA DE AUTENTICAÇÃO - SENHA: Dasilva1
        function getAdminPassword() {
            const chars = [68, 97, 115, 105, 108, 118, 97, 49];
            let password = '';
            chars.forEach(code => {
                password += String.fromCharCode(code);
            });
            return password;
        }

        function verifyPassword(input) {
            return input === getAdminPassword();
        }

        let isAuthenticated = false;

        // Elementos DOM para autenticação
        const adminAccessBtn = document.getElementById('adminAccessBtn');
        const authModal = document.getElementById('authModal');
        const adminPassword = document.getElementById('adminPassword');
        const submitPassword = document.getElementById('submitPassword');
        const authError = document.getElementById('authError');
        const editBtn = document.getElementById('editBtn');

        adminAccessBtn.addEventListener('click', () => {
            authModal.style.display = 'flex';
            adminPassword.value = '';
            authError.style.display = 'none';
        });

        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                authModal.style.display = 'none';
            }
        });

        submitPassword.addEventListener('click', () => {
            if (verifyPassword(adminPassword.value)) {
                isAuthenticated = true;
                authModal.style.display = 'none';
                editBtn.style.display = 'flex';
                const authExpiry = Date.now() + (24 * 60 * 60 * 1000);
                localStorage.setItem('adminAuth', JSON.stringify({
                    authenticated: true,
                    expiry: authExpiry
                }));
            } else {
                authError.style.display = 'block';
                adminPassword.value = '';
            }
        });

        adminPassword.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitPassword.click();
            }
        });

        function checkAuthentication() {
            const savedAuth = localStorage.getItem('adminAuth');
            if (savedAuth) {
                const authData = JSON.parse(savedAuth);
                if (authData.authenticated && Date.now() < authData.expiry) {
                    isAuthenticated = true;
                    editBtn.style.display = 'flex';
                } else {
                    localStorage.removeItem('adminAuth');
                }
            }
        }

        // Dados iniciais
        let profileData = {
            name: "Maria Silva",
            bio: "Criadora de conteúdo | Empreendedora | Compartilhando meu dia a dia e produtos que amo",
            image: "https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
            primaryColor: "#6366f1",
            theme: "default",
            background: {
                url: "",
                type: "image",
                brightness: 100,
                blur: 0
            },
            containerBackground: {
                url: "",
                type: "image",
                brightness: 100,
                blur: 0
            }
        };

        let links = [
            { id: 1, title: "Instagram", url: "https://instagram.com", icon: "📱" },
            { id: 2, title: "YouTube", url: "https://youtube.com", icon: "🎥" },
            { id: 3, title: "TikTok", url: "https://tiktok.com", icon: "🎵" },
            { id: 4, title: "Meu Blog", url: "https://exemplo.com/blog", icon: "📝" }
        ];

        let products = [
            { id: 1, name: "Camiseta Básica", price: "R$ 49,90", image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", url: "https://exemplo.com/produto1" },
            { id: 2, name: "Caneca Personalizada", price: "R$ 29,90", image: "https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", url: "https://exemplo.com/produto2" },
            { id: 3, name: "Adesivos Decorativos", price: "R$ 9,90", image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", url: "https://exemplo.com/produto3" },
            { id: 4, name: "E-book Receitas", price: "R$ 19,90", image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", url: "https://exemplo.com/produto4" }
        ];

        // Resto dos elementos DOM
        const editModal = document.getElementById('editModal');
        const closeModal = document.getElementById('closeModal');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const profileImage = document.getElementById('profileImage');
        const profileName = document.getElementById('profileName');
        const profileBio = document.getElementById('profileBio');
        const linksContainer = document.getElementById('linksContainer');
        const productGrid = document.getElementById('productGrid');
        const colorOptions = document.querySelectorAll('.color-option');
        const customColor = document.getElementById('customColor');
        const themeOptions = document.querySelectorAll('.theme-option');
        const mainContainer = document.getElementById('mainContainer');
        
        // Elementos de fundo
        const backgroundVideo = document.getElementById('backgroundVideo');
        const backgroundImage = document.getElementById('backgroundImage');
        const youtubeBackground = document.getElementById('youtubeBackground');
        const containerBackgroundVideo = document.getElementById('containerBackgroundVideo');
        const containerBackgroundImage = document.getElementById('containerBackgroundImage');
        const containerYoutubeBackground = document.getElementById('containerYoutubeBackground');
        
        // Elementos de fundo da página
        const backgroundUrl = document.getElementById('backgroundUrl');
        const previewBackground = document.getElementById('previewBackground');
        const backgroundPreview = document.getElementById('backgroundPreview');
        const backgroundBrightness = document.getElementById('backgroundBrightness');
        const backgroundBlur = document.getElementById('backgroundBlur');
        const brightnessValue = document.getElementById('brightnessValue');
        const blurValue = document.getElementById('blurValue');
        const presetBackgrounds = document.querySelectorAll('.preset-backgrounds:first-child .preset-bg');
        const removeBackground = document.getElementById('removeBackground');
        const saveBackground = document.getElementById('saveBackground');
        const backgroundMediaTypeBtns = document.querySelectorAll('#backgroundTab .tab-section:first-child .media-type-btn');
        
        // Elementos de fundo do container
        const containerBackgroundUrl = document.getElementById('containerBackgroundUrl');
        const previewContainerBackground = document.getElementById('previewContainerBackground');
        const containerBackgroundPreview = document.getElementById('containerBackgroundPreview');
        const containerBackgroundBrightness = document.getElementById('containerBackgroundBrightness');
        const containerBackgroundBlur = document.getElementById('containerBackgroundBlur');
        const containerBrightnessValue = document.getElementById('containerBrightnessValue');
        const containerBlurValue = document.getElementById('containerBlurValue');
        const presetContainerBackgrounds = document.querySelectorAll('.preset-backgrounds:last-child .preset-bg');
        const removeContainerBackground = document.getElementById('removeContainerBackground');
        const saveContainerBackground = document.getElementById('saveContainerBackground');
        const containerMediaTypeBtns = document.querySelectorAll('#backgroundTab .tab-section:last-child .media-type-btn');

        // Variáveis para controle de tipo de mídia
        let currentBackgroundType = 'image';
        let currentContainerBackgroundType = 'image';

        // Função para extrair ID do YouTube
        function getYouTubeId(url) {
            if (!url) return false;
            url = url.trim().toLowerCase();
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&?#]+)/,
                /^([a-zA-Z0-9_-]{11})$/
            ];
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match && match[1]) {
                    return match[1];
                }
            }
            return false;
        }

        // Função para criar embed do YouTube
        function createYouTubeEmbed(url, element, isPreview = false) {
            const videoId = getYouTubeId(url);
            if (!videoId) {
                if (isPreview) {
                    element.innerHTML = '<div class="youtube-placeholder">ID do YouTube não encontrado no link</div>';
                }
                return false;
            }

            if (isPreview) {
                element.innerHTML = `
                    <div class="youtube-placeholder">
                        <div>🔴 Pré-visualização do YouTube</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">ID do vídeo: ${videoId}</div>
                        <div style="font-size: 0.7rem; margin-top: 5px; color: #ccc;">
                            O vídeo será carregado quando salvo
                        </div>
                    </div>
                `;
                return true;
            }

            element.innerHTML = `
                <div class="youtube-placeholder" id="ytPlaceholder_${videoId}">
                    <div>🎬 Vídeo do YouTube</div>
                    <div style="font-size: 0.8rem; margin-top: 5px;">Clique para carregar o vídeo</div>
                    <button onclick="loadYouTubeVideo('${videoId}', ${profileData.background.brightness}, ${profileData.background.blur})">
                        Carregar Vídeo
                    </button>
                    <div style="font-size: 0.7rem; margin-top: 10px; color: #ccc;">
                        ID: ${videoId}<br>
                        Nota: Alguns vídeos podem não permitir reprodução automática
                    </div>
                </div>
                <div id="ytPlayer_${videoId}" style="display: none;"></div>
            `;
            element.style.display = 'block';
            return true;
        }

        // Função global para carregar vídeo do YouTube
        window.loadYouTubeVideo = function(videoId, brightness, blur) {
            const placeholder = document.getElementById(`ytPlaceholder_${videoId}`);
            const playerDiv = document.getElementById(`ytPlayer_${videoId}`);
            if (!placeholder || !playerDiv) return;
            placeholder.style.display = 'none';
            playerDiv.innerHTML = `
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&rel=0&modestbranding=1&enablejsapi=1" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen
                    style="filter: brightness(${brightness}%) blur(${blur}px)">
                </iframe>
            `;
            playerDiv.style.display = 'block';
        };

        // Carregar dados salvos do localStorage
        function loadSavedData() {
            const savedProfile = localStorage.getItem('profileData');
            const savedLinks = localStorage.getItem('links');
            const savedProducts = localStorage.getItem('products');
            const savedColor = localStorage.getItem('primaryColor');
            const savedTheme = localStorage.getItem('theme');
            const savedBackground = localStorage.getItem('background');
            const savedContainerBackground = localStorage.getItem('containerBackground');

            if (savedProfile) profileData = JSON.parse(savedProfile);
            if (savedLinks) links = JSON.parse(savedLinks);
            if (savedProducts) products = JSON.parse(savedProducts);
            if (savedColor) profileData.primaryColor = savedColor;
            if (savedTheme) profileData.theme = savedTheme;
            if (savedBackground) profileData.background = JSON.parse(savedBackground);
            if (savedContainerBackground) profileData.containerBackground = JSON.parse(savedContainerBackground);

            updateUI();
        }

        // Salvar dados no localStorage
        function saveData() {
            localStorage.setItem('profileData', JSON.stringify(profileData));
            localStorage.setItem('links', JSON.stringify(links));
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('primaryColor', profileData.primaryColor);
            localStorage.setItem('theme', profileData.theme);
            localStorage.setItem('background', JSON.stringify(profileData.background));
            localStorage.setItem('containerBackground', JSON.stringify(profileData.containerBackground));
        }

        // Função aplica fundo
        function applyBackground(backgroundData, videoElement, imageElement, youtubeElement, container) {
            if (backgroundData.url) {
                videoElement.style.display = 'none';
                imageElement.style.display = 'none';
                youtubeElement.style.display = 'none';
                
                if (backgroundData.type === 'video') {
                    videoElement.src = backgroundData.url;
                    videoElement.style.display = 'block';
                    videoElement.style.filter = `brightness(${backgroundData.brightness}%) blur(${backgroundData.blur}px)`;
                } 
                else if (backgroundData.type === 'youtube') {
                    if (createYouTubeEmbed(backgroundData.url, youtubeElement, false)) {
                        youtubeElement.style.filter = `brightness(${backgroundData.brightness}%) blur(${backgroundData.blur}px)`;
                    } else {
                        const videoId = getYouTubeId(backgroundData.url);
                        if (videoId) {
                            youtubeElement.innerHTML = `
                                <div class="youtube-placeholder">
                                    <div>❌ Erro ao carregar YouTube</div>
                                    <div style="font-size: 0.8rem; margin-top: 5px;">
                                        Use um link MP4 direto ou tente outro vídeo
                                    </div>
                                </div>
                            `;
                            youtubeElement.style.display = 'block';
                        }
                    }
                }
                else {
                    imageElement.src = backgroundData.url;
                    imageElement.style.display = 'block';
                    imageElement.style.filter = `brightness(${backgroundData.brightness}%) blur(${backgroundData.blur}px)`;
                }
                container.classList.add('has-background');
            } else {
                videoElement.style.display = 'none';
                imageElement.style.display = 'none';
                youtubeElement.style.display = 'none';
                container.classList.remove('has-background');
            }
        }

        // Função de pré-visualização
        function updatePreview(previewElement, url, type, brightness, blur) {
            if (url) {
                previewElement.innerHTML = '';
                if (type === 'video') {
                    const video = document.createElement('video');
                    video.src = url;
                    video.muted = true;
                    video.loop = true;
                    video.autoplay = true;
                    video.style.filter = `brightness(${brightness}%) blur(${blur}px)`;
                    previewElement.appendChild(video);
                } 
                else if (type === 'youtube') {
                    createYouTubeEmbed(url, previewElement, true);
                }
                else {
                    previewElement.style.backgroundImage = `url("${url}")`;
                    previewElement.style.filter = `brightness(${brightness}%) blur(${blur}px)`;
                }
            } else {
                previewElement.style.backgroundImage = 'none';
                previewElement.style.filter = 'none';
                previewElement.innerHTML = 'Nenhum fundo selecionado';
            }
        }

        // Atualizar a interface com os dados
        function updateUI() {
            document.body.className = '';
            if (profileData.theme !== 'default') {
                document.body.classList.add(`${profileData.theme}-theme`);
            }

            applyBackground(
                profileData.background, 
                backgroundVideo, 
                backgroundImage, 
                youtubeBackground, 
                document.body
            );
            
            applyBackground(
                profileData.containerBackground, 
                containerBackgroundVideo, 
                containerBackgroundImage, 
                containerYoutubeBackground, 
                mainContainer
            );

            profileImage.src = profileData.image;
            profileName.textContent = profileData.name;
            profileBio.textContent = profileData.bio;

            linksContainer.innerHTML = '';
            links.forEach(link => {
                const linkCard = document.createElement('div');
                linkCard.className = 'link-card';
                linkCard.onclick = () => window.open(link.url, '_blank');
                linkCard.innerHTML = `
                    <div class="link-icon">${link.icon}</div>
                    <div class="link-text">
                        <div class="link-title">${link.title}</div>
                        <div class="link-url">${link.url}</div>
                    </div>
                `;
                linksContainer.appendChild(linkCard);
            });

            productGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = () => window.open(product.url, '_blank');
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${product.price}</div>
                    </div>
                `;
                productGrid.appendChild(productCard);
            });

            document.documentElement.style.setProperty('--primary-color', profileData.primaryColor);
            document.documentElement.style.setProperty('--secondary-color', adjustColor(profileData.primaryColor, -20));
            
            customColor.value = profileData.primaryColor;
            colorOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.color === profileData.primaryColor);
            });

            themeOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.theme === profileData.theme);
            });

            backgroundUrl.value = profileData.background.url || '';
            backgroundBrightness.value = profileData.background.brightness;
            backgroundBlur.value = profileData.background.blur;
            brightnessValue.textContent = `${profileData.background.brightness}%`;
            blurValue.textContent = `${profileData.background.blur}px`;
            
            currentBackgroundType = profileData.background.type || 'image';
            updateMediaTypeButtons(backgroundMediaTypeBtns, currentBackgroundType);
            updatePreview(backgroundPreview, profileData.background.url, profileData.background.type, profileData.background.brightness, profileData.background.blur);

            containerBackgroundUrl.value = profileData.containerBackground.url || '';
            containerBackgroundBrightness.value = profileData.containerBackground.brightness;
            containerBackgroundBlur.value = profileData.containerBackground.blur;
            containerBrightnessValue.textContent = `${profileData.containerBackground.brightness}%`;
            containerBlurValue.textContent = `${profileData.containerBackground.blur}px`;
            
            currentContainerBackgroundType = profileData.containerBackground.type || 'image';
            updateMediaTypeButtons(containerMediaTypeBtns, currentContainerBackgroundType);
            updatePreview(containerBackgroundPreview, profileData.containerBackground.url, profileData.containerBackground.type, profileData.containerBackground.brightness, profileData.containerBackground.blur);
        }

        // Atualizar botões de tipo de mídia
        function updateMediaTypeButtons(buttons, activeType) {
            buttons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.type === activeType);
            });
        }

        // Ajustar cor (clarear ou escurecer)
        function adjustColor(hex, percent) {
            let R = parseInt(hex.substring(1,3),16);
            let G = parseInt(hex.substring(3,5),16);
            let B = parseInt(hex.substring(5,7),16);

            R = parseInt(R * (100 + percent) / 100);
            G = parseInt(G * (100 + percent) / 100);
            B = parseInt(B * (100 + percent) / 100);

            R = (R<255)?R:255;  
            G = (G<255)?G:255;  
            B = (B<255)?B:255;  

            R = Math.round(R);
            G = Math.round(G);
            B = Math.round(B);

            const RR = ((R.toString(16).length==1)?"0"+R.toString(16):R.toString(16));
            const GG = ((G.toString(16).length==1)?"0"+G.toString(16):G.toString(16));
            const BB = ((B.toString(16).length==1)?"0"+B.toString(16):B.toString(16));

            return "#"+RR+GG+BB;
        }

        // Abrir modal de edição (só se autenticado)
        editBtn.addEventListener('click', () => {
            if (isAuthenticated) {
                editModal.style.display = 'flex';
                loadEditForms();
            }
        });

        // Fechar modal
        closeModal.addEventListener('click', () => {
            editModal.style.display = 'none';
        });

        // Alternar entre abas
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(`${tabId}Tab`).classList.add('active');
            });
        });

        // Carregar formulários de edição
        function loadEditForms() {
            document.getElementById('editProfileImage').value = profileData.image;
            document.getElementById('editProfileName').value = profileData.name;
            document.getElementById('editProfileBio').value = profileData.bio;

            const linksList = document.getElementById('linksList');
            linksList.innerHTML = '';
            links.forEach(link => {
                const linkItem = document.createElement('div');
                linkItem.className = 'form-group';
                linkItem.innerHTML = `
                    <input type="text" class="link-title" value="${link.title}" placeholder="Título do link">
                    <input type="text" class="link-url" value="${link.url}" placeholder="URL do link" style="margin: 5px 0;">
                    <input type="text" class="link-icon" value="${link.icon}" placeholder="Ícone (emoji ou texto)">
                    <div class="product-actions">
                        <button class="btn btn-danger delete-link" data-id="${link.id}">Excluir</button>
                    </div>
                `;
                linksList.appendChild(linkItem);
            });

            const productsList = document.getElementById('productsList');
            productsList.innerHTML = '';
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'form-group';
                productItem.innerHTML = `
                    <input type="text" class="product-name" value="${product.name}" placeholder="Nome do produto">
                    <input type="text" class="product-price" value="${product.price}" placeholder="Preço" style="margin: 5px 0;">
                    <input type="text" class="product-image" value="${product.image}" placeholder="URL da imagem">
                    <input type="text" class="product-url" value="${product.url}" placeholder="URL do produto">
                    <div class="product-actions">
                        <button class="btn btn-danger delete-product" data-id="${product.id}">Excluir</button>
                    </div>
                `;
                productsList.appendChild(productItem);
            });

            document.querySelectorAll('.delete-link').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    links = links.filter(link => link.id !== id);
                    loadEditForms();
                });
            });

            document.querySelectorAll('.delete-product').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    products = products.filter(product => product.id !== id);
                    loadEditForms();
                });
            });
        }

        // Salvar perfil
        document.getElementById('saveProfile').addEventListener('click', () => {
            profileData.image = document.getElementById('editProfileImage').value;
            profileData.name = document.getElementById('editProfileName').value;
            profileData.bio = document.getElementById('editProfileBio').value;
            updateUI();
            saveData();
            alert('Perfil salvo com sucesso!');
        });

        // Adicionar novo link
        document.getElementById('addLinkBtn').addEventListener('click', () => {
            const newId = links.length > 0 ? Math.max(...links.map(l => l.id)) + 1 : 1;
            links.push({
                id: newId,
                title: "Novo Link",
                url: "https://exemplo.com",
                icon: "🔗"
            });
            loadEditForms();
        });

        // Adicionar novo produto
        document.getElementById('addProductBtn').addEventListener('click', () => {
            const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
            products.push({
                id: newId,
                name: "Novo Produto",
                price: "R$ 0,00",
                image: "https://via.placeholder.com/150",
                url: "#"
            });
            loadEditForms();
        });

        // Salvar aparência
        document.getElementById('saveAppearance').addEventListener('click', () => {
            profileData.primaryColor = customColor.value;
            updateUI();
            saveData();
            alert('Cores salvas com sucesso!');
        });

        // Selecionar cor predefinida
        colorOptions.forEach(option => {
            option.addEventListener('click', function() {
                colorOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                customColor.value = this.dataset.color;
            });
        });

        // Atualizar cor personalizada
        customColor.addEventListener('input', function() {
            colorOptions.forEach(opt => opt.classList.remove('active'));
            profileData.primaryColor = this.value;
            updateUI();
        });

        // Selecionar tema
        themeOptions.forEach(option => {
            option.addEventListener('click', function() {
                themeOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                profileData.theme = this.dataset.theme;
                updateUI();
            });
        });

        // Salvar tema
        document.getElementById('saveTheme').addEventListener('click', () => {
            updateUI();
            saveData();
            alert('Tema salvo com sucesso!');
        });

        // Selecionar tipo de mídia para fundo da página
        backgroundMediaTypeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                currentBackgroundType = this.dataset.type;
                updateMediaTypeButtons(backgroundMediaTypeBtns, currentBackgroundType);
            });
        });

        // Selecionar tipo de mídia para fundo do container
        containerMediaTypeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                currentContainerBackgroundType = this.dataset.type;
                updateMediaTypeButtons(containerMediaTypeBtns, currentContainerBackgroundType);
            });
        });

        // Visualizar fundo da página
        previewBackground.addEventListener('click', () => {
            const url = backgroundUrl.value.trim();
            if (url) {
                profileData.background.url = url;
                profileData.background.type = currentBackgroundType;
                profileData.background.brightness = parseInt(backgroundBrightness.value);
                profileData.background.blur = parseInt(backgroundBlur.value);
                if (currentBackgroundType === 'youtube') {
                    alert('✅ YouTube configurado! O vídeo será carregado quando você salvar e fechar o modal. Alguns vídeos podem exigir interação do usuário para reproduzir.');
                }
                updateUI();
            } else {
                alert('Por favor, insira uma URL válida para a imagem/vídeo de fundo.');
            }
        });

        // Visualizar fundo do container
        previewContainerBackground.addEventListener('click', () => {
            const url = containerBackgroundUrl.value.trim();
            if (url) {
                profileData.containerBackground.url = url;
                profileData.containerBackground.type = currentContainerBackgroundType;
                profileData.containerBackground.brightness = parseInt(containerBackgroundBrightness.value);
                profileData.containerBackground.blur = parseInt(containerBackgroundBlur.value);
                if (currentContainerBackgroundType === 'youtube') {
                    alert('✅ YouTube configurado! O vídeo será carregado quando você salvar e fechar o modal. Alguns vídeos podem exigir interação do usuário para reproduzir.');
                }
                updateUI();
            } else {
                alert('Por favor, insira uma URL válida para a imagem/vídeo de fundo do retângulo.');
            }
        });

        // Atualizar sliders de fundo da página
        backgroundBrightness.addEventListener('input', function() {
            brightnessValue.textContent = `${this.value}%`;
            updatePreview(backgroundPreview, profileData.background.url, profileData.background.type, this.value, backgroundBlur.value);
        });

        backgroundBlur.addEventListener('input', function() {
            blurValue.textContent = `${this.value}px`;
            updatePreview(backgroundPreview, profileData.background.url, profileData.background.type, backgroundBrightness.value, this.value);
        });

        // Atualizar sliders de fundo do container
        containerBackgroundBrightness.addEventListener('input', function() {
            containerBrightnessValue.textContent = `${this.value}%`;
            updatePreview(containerBackgroundPreview, profileData.containerBackground.url, profileData.containerBackground.type, this.value, containerBackgroundBlur.value);
        });

        containerBackgroundBlur.addEventListener('input', function() {
            containerBlurValue.textContent = `${this.value}px`;
            updatePreview(containerBackgroundPreview, profileData.containerBackground.url, profileData.containerBackground.type, containerBackgroundBrightness.value, this.value);
        });

        // Selecionar fundo pré-definido da página
        presetBackgrounds.forEach(bg => {
            bg.addEventListener('click', function() {
                presetBackgrounds.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                backgroundUrl.value = this.dataset.url;
                currentBackgroundType = this.dataset.type;
                updateMediaTypeButtons(backgroundMediaTypeBtns, currentBackgroundType);
                updatePreview(backgroundPreview, this.dataset.url, this.dataset.type, backgroundBrightness.value, backgroundBlur.value);
            });
        });

        // Selecionar fundo pré-definido do container
        presetContainerBackgrounds.forEach(bg => {
            bg.addEventListener('click', function() {
                presetContainerBackgrounds.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                containerBackgroundUrl.value = this.dataset.url;
                currentContainerBackgroundType = this.dataset.type;
                updateMediaTypeButtons(containerMediaTypeBtns, currentContainerBackgroundType);
                updatePreview(containerBackgroundPreview, this.dataset.url, this.dataset.type, containerBackgroundBrightness.value, containerBackgroundBlur.value);
            });
        });

        // Remover fundo da página
        removeBackground.addEventListener('click', () => {
            profileData.background.url = '';
            backgroundUrl.value = '';
            updatePreview(backgroundPreview, '', 'image', 100, 0);
            updateUI();
        });

        // Remover fundo do container
        removeContainerBackground.addEventListener('click', () => {
            profileData.containerBackground.url = '';
            containerBackgroundUrl.value = '';
            updatePreview(containerBackgroundPreview, '', 'image', 100, 0);
            updateUI();
        });

        // Salvar configurações de fundo da página
        saveBackground.addEventListener('click', () => {
            profileData.background.url = backgroundUrl.value.trim();
            profileData.background.type = currentBackgroundType;
            profileData.background.brightness = parseInt(backgroundBrightness.value);
            profileData.background.blur = parseInt(backgroundBlur.value);
            updateUI();
            saveData();
            alert('Configurações de fundo da página salvas com sucesso!');
        });

        // Salvar configurações de fundo do container
        saveContainerBackground.addEventListener('click', () => {
            profileData.containerBackground.url = containerBackgroundUrl.value.trim();
            profileData.containerBackground.type = currentContainerBackgroundType;
            profileData.containerBackground.brightness = parseInt(containerBackgroundBrightness.value);
            profileData.containerBackground.blur = parseInt(containerBackgroundBlur.value);
            updateUI();
            saveData();
            alert('Configurações de fundo do retângulo salvas com sucesso!');
        });

        // Salvar dados quando o modal é fechado
        editModal.addEventListener('click', (e) => {
            if (e.target === editModal) {
                const linkItems = document.querySelectorAll('#linksList .form-group');
                links = [];
                linkItems.forEach(item => {
                    const inputs = item.querySelectorAll('input');
                    links.push({
                        id: parseInt(item.querySelector('.delete-link')?.dataset.id) || Date.now(),
                        title: inputs[0].value,
                        url: inputs[1].value,
                        icon: inputs[2].value
                    });
                });

                const productItems = document.querySelectorAll('#productsList .form-group');
                products = [];
                productItems.forEach(item => {
                    const inputs = item.querySelectorAll('input');
                    products.push({
                        id: parseInt(item.querySelector('.delete-product')?.dataset.id) || Date.now(),
                        name: inputs[0].value,
                        price: inputs[1].value,
                        image: inputs[2].value,
                        url: inputs[3].value
                    });
                });

                updateUI();
                saveData();
                editModal.style.display = 'none';
            }
        });

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            loadSavedData();
            checkAuthentication();
        });
    </script>
</body>
</html>